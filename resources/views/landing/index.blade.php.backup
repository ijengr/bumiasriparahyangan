@extends('layouts.app')

@section('content')
{{-- Hero Section - Clean & Modern --}}
<section class="relative bg-white overflow-hidden">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-20">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            {{-- Hero Content --}}
            <div class="space-y-6" data-aos="fade-right">
                <div class="inline-flex items-center gap-2 bg-emerald-50 border border-emerald-200 text-emerald-700 px-4 py-2 rounded-lg text-sm font-medium">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/></svg>
                    <span>Hunian Premium di Parahyangan</span>
                </div>

                <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 leading-tight">
                    {{ $siteSettings['hero_title'] ?? 'Temukan' }}<br>
                    <span class="text-emerald-600">Hunian Impian</span><br>
                    Anda
                </h1>
                
                <p class="text-lg text-gray-600 leading-relaxed">
                    {{ $siteSettings['hero_subtitle'] ?? 'Bumi Asri Parahyangan menghadirkan hunian dengan lingkungan hijau, fasilitas modern, dan suasana komunitas yang ramah. Pilih unit yang cocok untuk gaya hidup Anda.' }}
                </p>

                <div class="flex flex-col sm:flex-row gap-3">
                    <a href="{{ route('landing.units') }}" class="inline-flex items-center justify-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-4 rounded-lg font-semibold transition-colors">
                        <span>{{ $siteSettings['btn_view_units'] ?? 'Lihat Unit' }}</span>
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
                    </a>
                    <a href="{{ route('landing.contact') }}" class="inline-flex items-center justify-center gap-2 bg-white hover:bg-gray-50 border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-lg font-semibold transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                        <span>{{ $siteSettings['btn_contact_us'] ?? 'Hubungi Kami' }}</span>
                    </a>
                </div>

                {{-- Feature Pills - Clean Design --}}
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 pt-4">
                    <div class="flex items-center gap-3 p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <div class="w-10 h-10 bg-emerald-600 rounded-lg flex items-center justify-center flex-shrink-0">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                        </div>
                        <div>
                            <div class="text-sm font-semibold text-gray-900">{{ $siteSettings['feature1_title'] ?? 'Lokasi Strategis' }}</div>
                            <div class="text-xs text-gray-600">{{ $siteSettings['feature1_subtitle'] ?? 'Akses mudah' }}</div>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <div class="w-10 h-10 bg-emerald-600 rounded-lg flex items-center justify-center flex-shrink-0">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
                        </div>
                        <div>
                            <div class="text-sm font-semibold text-gray-900">{{ $siteSettings['feature2_title'] ?? 'Keamanan 24/7' }}</div>
                            <div class="text-xs text-gray-600">{{ $siteSettings['feature2_subtitle'] ?? 'Area aman' }}</div>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <div class="w-10 h-10 bg-emerald-600 rounded-lg flex items-center justify-center flex-shrink-0">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/></svg>
                        </div>
                        <div>
                            <div class="text-sm font-semibold text-gray-900">{{ $siteSettings['feature3_title'] ?? 'Ruang Hijau' }}</div>
                            <div class="text-xs text-gray-600">{{ $siteSettings['feature3_subtitle'] ?? 'Lingkungan asri' }}</div>
                        </div>
                    </div>
                </div>
            </div>

            {{-- Hero Image - Simplified --}}
            <div class="relative" data-aos="fade-left" data-aos-delay="200">
                <div class="relative rounded-2xl overflow-hidden shadow-xl">
                    <div class="relative h-96 lg:h-[500px]"
                        @php
                            // Build hero rotator URLs from $gallery (shuffle -> take 6)
                            $pool = collect($gallery ?? [])->shuffle()->take(6)->values();
                            $heroUrls = [];
                            foreach ($pool as $it) {
                                $publicFallback = asset('images/placeholder-wide.svg');
                                $imgUrl = $publicFallback;
                                if (!empty($it->path)) {
                                    $pubCandidate = public_path(ltrim($it->path, '/'));
                                    if (file_exists($pubCandidate)) {
                                        $imgUrl = asset(ltrim($it->path, '/'));
                                    } else {
                                        $basename = basename($it->path);
                                        $samplePub = public_path('images/samples/' . $basename);
                                        if (file_exists($samplePub)) {
                                            $imgUrl = asset('images/samples/' . $basename);
                                        } else {
                                            $baseNoExt = preg_replace('/\.[^.]+$/', '', $basename);
                                            $found = false;
                                            foreach (['svg','jpg','jpeg','png','webp'] as $ext) {
                                                $candidate = public_path('images/samples/' . $baseNoExt . '.' . $ext);
                                                if (file_exists($candidate)) { $imgUrl = asset('images/samples/' . $baseNoExt . '.' . $ext); $found = true; break; }
                                            }
                                            if (!$found) {
                                                $storedPath = storage_path('app/public/' . ltrim($it->path, '/'));
                                                if (file_exists($storedPath)) { $imgUrl = asset('storage/' . ltrim($it->path, '/')); }
                                            }
                                        }
                                    }
                                }
                                $heroUrls[] = $imgUrl;
                            }
                        @endphp

                        @if(count($heroUrls) > 0)
                        <div class="relative rounded-2xl overflow-hidden h-full hero-rotator" data-images='{{ json_encode($heroUrls) }}'>
                            <img src="{{ $heroUrls[0] }}" alt="Bumi Asri Parahyangan" class="w-full h-full object-cover rotator-hero-img" fetchpriority="high" loading="eager">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                            
                            {{-- Image counter indicator --}}
                            <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2">
                                @foreach($heroUrls as $index => $url)
                                <div class="w-2 h-2 bg-white/50 hover:bg-white rounded-full transition-all {{ $index === 0 ? 'w-8 bg-white' : '' }} rotator-indicator" data-index="{{ $index }}"></div>
                                @endforeach
                            </div>
                        </div>
                        @else
                        <img src="https://images.unsplash.com/photo-1505691723518-36a2c0b9a4b4?auto=format&fit=crop&w=1200&q=80" alt="Bumi Asri Parahyangan" class="w-full h-full object-cover" fetchpriority="high" loading="eager">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                        @endif
                        
                        {{-- Simple badge --}}
                        <div class="absolute top-4 right-4">
                            <div class="bg-white px-4 py-2 rounded-lg shadow-lg">
                                <div class="flex items-center gap-2">
                                    <span class="w-2 h-2 bg-emerald-500 rounded-full"></span>
                                    <span class="text-sm font-semibold text-gray-900">Unit Tersedia</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{{-- Featured Units Section --}}
<section class="relative bg-gradient-to-b from-white via-gray-50 to-white py-20 lg:py-32 overflow-hidden">
    {{-- Decorative Background --}}
    <div class="absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-emerald-50/50 to-transparent"></div>
    <div class="absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-tl from-teal-100/30 to-transparent rounded-full blur-3xl"></div>
    
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        {{-- Section Header --}}
        <div class="text-center mb-16" data-aos="fade-up">
            <div class="inline-flex items-center gap-2 bg-gradient-to-r from-emerald-100 to-teal-100 px-6 py-2.5 rounded-full mb-6">
                <svg class="w-5 h-5 text-emerald-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z" clip-rule="evenodd"/></svg>
                <span class="text-sm font-bold text-emerald-700">PILIHAN TERBAIK</span>
            </div>
            <h2 class="text-4xl lg:text-5xl font-extrabold text-gray-900 mb-4">
                {{ $siteSettings['featured_title'] ?? 'Unit Unggulan' }}
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                {{ $siteSettings['featured_subtitle'] ?? 'Pilihan unit terbaik kami â€” dipilih berdasarkan lokasi dan desain.' }}
            </p>
        </div>

        {{-- Grid Layout: Units + Sidebar --}}
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12">
            {{-- Main Content: Units Grid --}}
            <div class="lg:col-span-2">
                <div id="units-grid" class="grid grid-cols-1 sm:grid-cols-2 gap-8 mb-12" data-aos="fade-up" data-aos-delay="200">
                    @include('landing._unit_cards', ['units' => $units])
                </div>

                {{-- View All Button --}}
                <div class="flex justify-center" data-aos="fade-up" data-aos-delay="400">
                    <a href="{{ route('landing.units') }}" class="group relative inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white px-10 py-5 rounded-2xl shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 font-bold text-lg overflow-hidden">
                        <div class="absolute inset-0 bg-white/20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"></div>
                        <span class="relative">Lihat Semua Unit</span>
                        <svg class="relative w-6 h-6 group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
                    </a>
                </div>
            </div>

            {{-- Sidebar --}}
            <aside class="space-y-8" data-aos="fade-left" data-aos-delay="200">
                {{-- Facilities Card --}}
                <div class="relative group bg-white rounded-3xl shadow-xl border border-emerald-100/50 overflow-hidden hover:shadow-2xl transition-all duration-500">
                    {{-- Decorative background --}}
                    <div class="absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-emerald-400/10 to-teal-400/10 rounded-full blur-3xl"></div>
                    
                    <div class="relative bg-gradient-to-br from-emerald-600 via-emerald-600 to-teal-600 p-8">
                        <div class="flex items-start justify-between mb-2">
                            <div class="flex-1">
                                <h3 class="text-2xl font-extrabold text-white mb-1.5">{{ $siteSettings['facilities_title'] ?? 'Fasilitas Unggulan' }}</h3>
                                <p class="text-emerald-100 text-sm">{{ $siteSettings['facilities_subtitle'] ?? 'Kemudahan untuk Anda' }}</p>
                            </div>
                            <div class="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center transform group-hover:rotate-12 transition-transform duration-500">
                                <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/></svg>
                            </div>
                        </div>
                        
                        {{-- Decorative wave --}}
                        <div class="absolute bottom-0 left-0 right-0">
                            <svg class="w-full h-4 text-white" viewBox="0 0 1200 20" preserveAspectRatio="none">
                                <path d="M0,10 Q300,0 600,10 T1200,10 L1200,20 L0,20 Z" fill="currentColor"/>
                            </svg>
                        </div>
                    </div>
                    
                    <div class="relative bg-white p-8">
                        <ul class="space-y-4">
                            @forelse($facilities as $facility)
                                <li class="group/item flex items-start gap-4 p-4 rounded-2xl hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 transition-all duration-300 cursor-pointer border border-transparent hover:border-emerald-200">
                                    <div class="w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md group-hover/item:scale-110 group-hover/item:rotate-3 transition-transform duration-300">
                                        <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                                    </div>
                                    <span class="font-bold text-gray-900 group-hover/item:text-emerald-700 transition-colors pt-2">{{ $facility->name }}</span>
                                </li>
                            @empty
                                <li class="flex items-center gap-3 text-gray-500 italic bg-gray-50 rounded-xl p-4 border border-dashed border-gray-300">
                                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/></svg>
                                    <span class="text-sm">{{ $siteSettings['empty_facilities'] ?? 'Belum ada fasilitas terdaftar.' }}</span>
                                </li>
                            @endforelse
                        </ul>
                    </div>
                </div>

                {{-- Gallery Preview Card --}}
                <div class="relative group bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden hover:shadow-2xl transition-all duration-500">
                    <div class="p-8 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="text-2xl font-extrabold text-gray-900 mb-1">Galeri</h4>
                                <p class="text-sm text-gray-600">Jelajahi lingkungan kami</p>
                            </div>
                            <div class="w-14 h-14 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center shadow-lg transform group-hover:rotate-12 group-hover:scale-110 transition-transform duration-500">
                                <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            @foreach($gallery as $img)
                                <div class="relative group/img overflow-hidden rounded-2xl aspect-square shadow-md hover:shadow-xl transition-all duration-500">
                                            @php
                                                // More robust image selection: public -> public samples (try extensions) -> storage -> placeholder
                                                $publicFallback = asset('images/placeholder-square.svg');
                                                $imgPreview = $publicFallback;
                                                if (!empty($img->path)) {
                                                    // direct public path
                                                    $pubCandidate = public_path(ltrim($img->path, '/'));
                                                    if (file_exists($pubCandidate)) {
                                                        $imgPreview = asset(ltrim($img->path, '/'));
                                                    } else {
                                                        // try public samples by basename and try common extensions
                                                        $basename = basename($img->path);
                                                        $baseNoExt = preg_replace('/\.[^.]+$/', '', $basename);
                                                        $samplePub = public_path('images/samples/' . $basename);
                                                        if (file_exists($samplePub)) {
                                                            $imgPreview = asset('images/samples/' . $basename);
                                                        } else {
                                                            $found = false;
                                                            $exts = ['svg','jpg','jpeg','png','webp'];
                                                            foreach ($exts as $ext) {
                                                                $candidate = public_path('images/samples/' . $baseNoExt . '.' . $ext);
                                                                if (file_exists($candidate)) {
                                                                    $imgPreview = asset('images/samples/' . $baseNoExt . '.' . $ext);
                                                                    $found = true;
                                                                    break;
                                                                }
                                                            }
                                                            if (!$found) {
                                                                // check storage
                                                                $storedPath = storage_path('app/public/' . ltrim($img->path, '/'));
                                                                if (file_exists($storedPath)) {
                                                                    $imgPreview = asset('storage/' . ltrim($img->path, '/'));
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            @endphp
                                            <img src="{{ $imgPreview }}" alt="{{ $img->caption ?? 'Gallery' }}" class="w-full h-full object-cover transform group-hover/img:scale-125 group-hover/img:rotate-2 transition-all duration-700" loading="lazy" onerror="this.onerror=null;this.src='{{ asset('images/placeholder-square.svg') }}';">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent opacity-0 group-hover/img:opacity-100 transition-opacity duration-500">
                                        <div class="absolute inset-0 flex items-center justify-center">
                                            <div class="bg-white/20 backdrop-blur-sm rounded-full p-3 transform scale-50 group-hover/img:scale-100 transition-transform duration-500">
                                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"/></svg>
                                            </div>
                                        </div>
                                        <div class="absolute bottom-3 left-3 right-3">
                                            <p class="text-white text-sm font-bold truncate drop-shadow-lg">{{ $img->caption ?? 'Gallery Image' }}</p>
                                        </div>
                                    </div>
                                </div>
                            @endforeach
                        </div>
                        
                        <a href="{{ route('landing.gallery') }}" class="group/btn flex items-center justify-center gap-2 w-full text-sm font-bold bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white py-4 rounded-2xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                            <span>Lihat Galeri Lengkap</span>
                            <svg class="w-5 h-5 group-hover/btn:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
                        </a>
                    </div>
                </div>

                {{-- CTA Card --}}
                <div class="relative group bg-gradient-to-br from-emerald-600 via-emerald-700 to-teal-700 rounded-3xl shadow-2xl overflow-hidden transform hover:scale-105 transition-all duration-500">
                    {{-- Animated background blobs --}}
                    <div class="absolute top-0 right-0 w-48 h-48 bg-white/10 rounded-full -mr-24 -mt-24 group-hover:scale-150 transition-transform duration-1000"></div>
                    <div class="absolute bottom-0 left-0 w-40 h-40 bg-white/10 rounded-full -ml-20 -mb-20 group-hover:scale-150 transition-transform duration-1000"></div>
                    <div class="absolute top-1/2 left-1/2 w-32 h-32 bg-teal-400/20 rounded-full blur-2xl animate-pulse"></div>
                    
                    <div class="relative p-8 text-white">
                        <div class="w-16 h-16 bg-white/20 backdrop-blur-lg rounded-2xl flex items-center justify-center mb-6 shadow-xl transform group-hover:rotate-12 group-hover:scale-110 transition-all duration-500">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                        </div>
                        <h3 class="text-2xl font-extrabold mb-3 leading-tight">Butuh Informasi Lebih?</h3>
                        <p class="text-emerald-100 mb-8 text-base leading-relaxed">Hubungi kami untuk konsultasi gratis dan dapatkan penawaran terbaik untuk hunian impian Anda.</p>
                        
                        {{-- Contact stats --}}
                        <div class="flex items-center gap-6 mb-8 pb-8 border-b border-white/20">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/></svg>
                                </div>
                                <div>
                                    <div class="text-xs text-emerald-200">Response Time</div>
                                    <div class="text-sm font-bold">< 1 Jam</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                                </div>
                                <div>
                                    <div class="text-xs text-emerald-200">Konsultasi</div>
                                    <div class="text-sm font-bold">Gratis</div>
                                </div>
                            </div>
                        </div>
                        
                        <a href="{{ route('landing.contact') }}" class="group/btn relative inline-flex items-center justify-center gap-3 bg-white text-emerald-600 hover:bg-emerald-50 px-8 py-5 rounded-2xl font-bold shadow-2xl hover:shadow-emerald-900/50 transition-all transform hover:-translate-y-1 w-full overflow-hidden">
                            <div class="absolute inset-0 bg-gradient-to-r from-emerald-100 to-teal-100 opacity-0 group-hover/btn:opacity-100 transition-opacity duration-500"></div>
                            <svg class="relative w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/></svg>
                            <span class="relative">Hubungi Sekarang</span>
                            <svg class="relative w-5 h-5 group-hover/btn:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
                        </a>
                    </div>
                </div>
            </aside>
        </div>
    </div>
</section>

{{-- KPR Calculator Section --}}
<section class="bg-gradient-to-br from-emerald-50 via-white to-teal-50 py-16 lg:py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12" data-aos="fade-up">
            <div class="inline-block px-4 py-2 bg-emerald-100 text-emerald-700 text-sm font-semibold rounded-full mb-4">
                KALKULATOR KPR
            </div>
            <h2 class="text-3xl lg:text-4xl font-bold text-gray-900 mb-4">
                Hitung Cicilan <span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-teal-600">Rumah Impian</span> Anda
            </h2>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                Simulasikan cicilan bulanan dengan berbagai skenario untuk merencanakan pembelian rumah Anda
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            {{-- Calculator Form --}}
            <div class="bg-white rounded-2xl shadow-xl border border-emerald-100 p-8" data-aos="fade-right">
                <div class="space-y-6">
                    {{-- Harga Properti --}}
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Harga Properti</label>
                        <div class="relative">
                            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium">Rp</span>
                            <input type="text" id="kpr-price" value="600.000.000" class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 transition-all text-lg font-semibold">
                        </div>
                        <input type="range" id="kpr-price-range" min="100000000" max="2000000000" step="10000000" value="600000000" class="w-full mt-3 h-2 bg-gradient-to-r from-emerald-200 to-emerald-500 rounded-lg appearance-none cursor-pointer">
                    </div>

                    {{-- Uang Muka --}}
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Uang Muka (DP)</label>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="relative">
                                <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium">Rp</span>
                                <input type="text" id="kpr-dp" value="120.000.000" class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 transition-all font-semibold">
                            </div>
                            <div class="relative">
                                <input type="number" id="kpr-dp-percent" value="20" min="0" max="100" class="w-full pl-4 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 transition-all font-semibold">
                                <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium">%</span>
                            </div>
                        </div>
                    </div>

                    {{-- Jangka Waktu --}}
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Jangka Waktu</label>
                        <div class="grid grid-cols-4 gap-2">
                            <button type="button" class="kpr-tenor-btn px-4 py-3 border-2 border-gray-200 rounded-xl font-semibold hover:border-emerald-500 hover:bg-emerald-50 transition-all" data-years="5">5 Tahun</button>
                            <button type="button" class="kpr-tenor-btn px-4 py-3 border-2 border-gray-200 rounded-xl font-semibold hover:border-emerald-500 hover:bg-emerald-50 transition-all" data-years="10">10 Tahun</button>
                            <button type="button" class="kpr-tenor-btn px-4 py-3 border-2 border-emerald-500 bg-emerald-50 rounded-xl font-semibold text-emerald-700" data-years="15">15 Tahun</button>
                            <button type="button" class="kpr-tenor-btn px-4 py-3 border-2 border-gray-200 rounded-xl font-semibold hover:border-emerald-500 hover:bg-emerald-50 transition-all" data-years="20">20 Tahun</button>
                        </div>
                    </div>

                    {{-- Suku Bunga --}}
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Suku Bunga per Tahun</label>
                        <div class="relative">
                            <input type="number" id="kpr-rate" value="8.5" min="0" max="30" step="0.1" class="w-full pl-4 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 transition-all text-lg font-semibold">
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium">%</span>
                        </div>
                    </div>

                    {{-- Calculate Button --}}
                    <button id="kpr-calculate" class="w-full bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white py-4 rounded-xl font-bold shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5">
                        <span class="flex items-center justify-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/></svg>
                            Hitung Cicilan
                        </span>
                    </button>
                </div>
            </div>

            {{-- Result Display --}}
            <div class="space-y-6" data-aos="fade-left">
                {{-- Main Result Card --}}
                <div class="bg-gradient-to-br from-emerald-600 to-teal-600 rounded-2xl shadow-xl overflow-hidden">
                    <div class="absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -mr-20 -mt-20"></div>
                    <div class="relative p-8 text-white">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                            </div>
                            <div>
                                <div class="text-emerald-100 text-sm font-medium">Cicilan Per Bulan</div>
                                <div id="kpr-monthly" class="text-4xl font-bold">Rp 4.889.000</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4">
                                <div class="text-emerald-100 text-xs font-medium mb-1">Pokok Pinjaman</div>
                                <div id="kpr-principal" class="text-xl font-bold">Rp 480 Juta</div>
                            </div>
                            <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4">
                                <div class="text-emerald-100 text-xs font-medium mb-1">Total Bunga</div>
                                <div id="kpr-interest" class="text-xl font-bold">Rp 400 Juta</div>
                            </div>
                        </div>
                    </div>
                </div>

                {{-- Details Card --}}
                <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-8">
                    <h3 class="text-lg font-bold text-gray-900 mb-6 flex items-center gap-2">
                        <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg>
                        Detail Perhitungan
                    </h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center pb-3 border-b border-gray-100">
                            <span class="text-gray-600">Harga Properti</span>
                            <span id="kpr-detail-price" class="font-bold text-gray-900">Rp 600.000.000</span>
                        </div>
                        <div class="flex justify-between items-center pb-3 border-b border-gray-100">
                            <span class="text-gray-600">Uang Muka</span>
                            <span id="kpr-detail-dp" class="font-bold text-emerald-600">Rp 120.000.000</span>
                        </div>
                        <div class="flex justify-between items-center pb-3 border-b border-gray-100">
                            <span class="text-gray-600">Jangka Waktu</span>
                            <span id="kpr-detail-tenor" class="font-bold text-gray-900">15 Tahun</span>
                        </div>
                        <div class="flex justify-between items-center pb-3 border-b border-gray-100">
                            <span class="text-gray-600">Suku Bunga</span>
                            <span id="kpr-detail-rate" class="font-bold text-gray-900">8.5% / Tahun</span>
                        </div>
                        <div class="flex justify-between items-center pt-2">
                            <span class="text-gray-900 font-semibold">Total Pembayaran</span>
                            <span id="kpr-total" class="font-bold text-xl text-emerald-600">Rp 880.000.000</span>
                        </div>
                    </div>
                </div>

                {{-- Disclaimer --}}
                <div class="bg-amber-50 border border-amber-200 rounded-xl p-4">
                    <div class="flex gap-3">
                        <svg class="w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        <p class="text-xs text-amber-800">
                            <span class="font-semibold">Catatan:</span> Hasil kalkulasi ini bersifat estimasi. Besaran cicilan aktual dapat berbeda tergantung kebijakan bank dan program KPR yang dipilih.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@push('scripts')
<script>
document.addEventListener('DOMContentLoaded', function() {
    const priceInput = document.getElementById('kpr-price');
    const priceRange = document.getElementById('kpr-price-range');
    const dpInput = document.getElementById('kpr-dp');
    const dpPercentInput = document.getElementById('kpr-dp-percent');
    const rateInput = document.getElementById('kpr-rate');
    const tenorBtns = document.querySelectorAll('.kpr-tenor-btn');
    const calculateBtn = document.getElementById('kpr-calculate');
    
    let selectedTenor = 15;

    // Format number to IDR
    function formatIDR(num) {
        return new Intl.NumberFormat('id-ID').format(num);
    }

    // Parse IDR string to number
    function parseIDR(str) {
        return parseInt(str.replace(/\D/g, '')) || 0;
    }

    // Update price from range
    priceRange.addEventListener('input', function() {
        priceInput.value = formatIDR(this.value);
        updateDP();
    });

    // Update range from price input
    priceInput.addEventListener('input', function() {
        const val = parseIDR(this.value);
        priceRange.value = val;
        this.value = formatIDR(val);
        updateDP();
    });

    // Update DP when percent changes
    dpPercentInput.addEventListener('input', function() {
        updateDP();
    });

    // Update DP percent when DP amount changes
    dpInput.addEventListener('input', function() {
        const dpVal = parseIDR(this.value);
        const priceVal = parseIDR(priceInput.value);
        if (priceVal > 0) {
            const percent = Math.round((dpVal / priceVal) * 100);
            dpPercentInput.value = Math.min(100, Math.max(0, percent));
        }
        this.value = formatIDR(dpVal);
    });

    function updateDP() {
        const price = parseIDR(priceInput.value);
        const percent = parseFloat(dpPercentInput.value) || 0;
        const dp = Math.round(price * percent / 100);
        dpInput.value = formatIDR(dp);
    }

    // Tenor selection
    tenorBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            tenorBtns.forEach(b => {
                b.classList.remove('border-emerald-500', 'bg-emerald-50', 'text-emerald-700');
                b.classList.add('border-gray-200');
            });
            this.classList.add('border-emerald-500', 'bg-emerald-50', 'text-emerald-700');
            this.classList.remove('border-gray-200');
            selectedTenor = parseInt(this.getAttribute('data-years'));
        });
    });

    // Calculate KPR
    calculateBtn.addEventListener('click', calculate);
    
    function calculate() {
        const price = parseIDR(priceInput.value);
        const dp = parseIDR(dpInput.value);
        const principal = price - dp;
        const rate = parseFloat(rateInput.value) / 100 / 12; // Monthly interest rate
        const months = selectedTenor * 12;

        if (principal <= 0 || rate <= 0 || months <= 0) {
            alert('Pastikan semua nilai sudah diisi dengan benar');
            return;
        }

        // Calculate monthly payment using formula: M = P * [r(1+r)^n] / [(1+r)^n - 1]
        const monthly = principal * (rate * Math.pow(1 + rate, months)) / (Math.pow(1 + rate, months) - 1);
        const totalPayment = monthly * months;
        const totalInterest = totalPayment - principal;

        // Update display
        document.getElementById('kpr-monthly').textContent = 'Rp ' + formatIDR(Math.round(monthly));
        document.getElementById('kpr-principal').textContent = 'Rp ' + formatIDR(Math.round(principal / 1000000)) + ' Juta';
        document.getElementById('kpr-interest').textContent = 'Rp ' + formatIDR(Math.round(totalInterest / 1000000)) + ' Juta';
        document.getElementById('kpr-total').textContent = 'Rp ' + formatIDR(Math.round(totalPayment));
        
        document.getElementById('kpr-detail-price').textContent = 'Rp ' + formatIDR(price);
        document.getElementById('kpr-detail-dp').textContent = 'Rp ' + formatIDR(dp);
        document.getElementById('kpr-detail-tenor').textContent = selectedTenor + ' Tahun (' + months + ' Bulan)';
        document.getElementById('kpr-detail-rate').textContent = rateInput.value + '% / Tahun';
    }

    // Initial calculation
    calculate();
});
</script>
@endpush

@endsection
